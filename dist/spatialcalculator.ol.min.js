!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){t.exports='<div class="m-control m-spatialcalculator-container">\n    <div class="m-spatialcalculator-panel">\n        <div class="title">\n            Calculadora espacial\n        </div>\n        <div class="m-spatialcalculator-datas">\n            <div>\n                <span>Origen:</span>\n                <select name="srs" id="m-spatialcalculator-srs">\n\n                    <option value="EPSG:3857">WGS84 (EPSG:3857)</option>\n                    \x3c!--Geográficas--\x3e\n                    <option value="EPSG:4326">WGS84 (EPSG:4326)</option>\n                    <option value="EPSG:4230">ED50 (EPSG:4230)</option>\n                    <option value="EPSG:4258">ETRS89 (EPSG:4258)</option>\n                    \x3c!--ED50 UTM--\x3e\n                    <option value="EPSG:23028">ED50/UTM huso 28 (EPSG:23028)</option>\n                    <option value="EPSG:23029">ED50/UTM huso 29 (EPSG:23029)</option>\n                    <option value="EPSG:23030">ED50/UTM huso 30 (EPSG:23030)</option>\n                    <option value="EPSG:23031">ED50/UTM huso 31 (EPSG:23031)</option>\n                    \x3c!--ETRS89 UTM--\x3e\n                    <option value="EPSG:25828">ETRS89/UTM huso 28 (EPSG:25828)</option>\n                    <option value="EPSG:25829">ETRS89/UTM huso 29 (EPSG:25829)</option>\n                    <option value="EPSG:25830">ETRS89/UTM huso 30 (EPSG:25830)</option>\n                    <option value="EPSG:25831">ETRS89/UTM huso 31 (EPSG:25831)</option>\n\n                </select>\n            </div>\n            <div>\n                <span>Destino:</span>\n                <select name="srs" id="m-spatialcalculator-srs-target">\n\n                    <option value="EPSG:3857">WGS84 (EPSG:3857)</option>\n                    \x3c!--Geográficas--\x3e\n                    <option value="EPSG:4326">WGS84 (EPSG:4326)</option>\n                    <option value="EPSG:4230">ED50 (EPSG:4230)</option>\n                    <option value="EPSG:4258">ETRS89 (EPSG:4258)</option>\n                    \x3c!--ED50 UTM--\x3e\n                    <option value="EPSG:23028">ED50/UTM huso 28 (EPSG:23028)</option>\n                    <option value="EPSG:23029">ED50/UTM huso 29 (EPSG:23029)</option>\n                    <option value="EPSG:23030">ED50/UTM huso 30 (EPSG:23030)</option>\n                    <option value="EPSG:23031">ED50/UTM huso 31 (EPSG:23031)</option>\n                    \x3c!--ETRS89 UTM--\x3e\n                    <option value="EPSG:25828">ETRS89/UTM huso 28 (EPSG:25828)</option>\n                    <option value="EPSG:25829">ETRS89/UTM huso 29 (EPSG:25829)</option>\n                    <option value="EPSG:25830">ETRS89/UTM huso 30 (EPSG:25830)</option>\n                    <option value="EPSG:25831">ETRS89/UTM huso 31 (EPSG:25831)</option>\n                </select>\n            </div>\n            <div id="m-spatialcalculator-utm">\n                <span>UTM-X:</span>\n                <input type="number" name="UTM-X" id="UTM-X" placeholder="Ej: 234596.23">\n                <span>UTM-Y:</span>\n                <input type="number" name="UTM-Y" id="UTM-Y" placeholder="Ej: 4142261.27">\n            </div>\n            <div id="m-spatialcalculator-latlon" style="display:none;">\n                <span>LON:</span>\n                <input type="text" name="LON" id="LON" placeholder="Ej: -5.59479">\n                <span>LAT:</span>\n                <input type="text" name="LAT" id="LAT" placeholder="Ej: 37.3895">\n            </div>\n        </div>\n        <div class="button">\n            <button class="represent" id="m-spatialcalculator-clean" title="Copiar al portapapeles">\n                <i class="g-cartografia-papelera"></i> Limpiar\n            </button>\n            <button class="represent" id="m-spatialcalculator-calculate">\n                <i class="g-cartografia-posicion3"></i> Calcular\n            </button>\n        </div>\n    </div>\n    <div class="m-spatialcalculator-panel panel-codigo">\n        <div class="title" id="resultado">Resultado</div>\n        <div id="m-spatialcalculator-result">\n        </div>\n    </div>\n</div>'},function(t){t.exports={url:{name:"SpatialCalculator",separator:"*"},constructor:"M.plugin.SpatialCalculator",parameters:[{type:"object",properties:[{type:"enum",name:"position",possibleValues:["TR","TL","BL","BR"],position:0}]}],files:{ol:{scripts:["spatialcalculator.ol.min.js"],styles:["spatialcalculator.ol.min.css"]}},metadata:{name:"SpatialCalculator",description:"Cambio de coordenadas",text:"Cambia unas coordenadas entre sistemas de referencia (también acepta coordenadas geográficas).",version:"1.0.0",date:"Junio, 2020",author:"",org:"Consejería de Hacienda, Industria y Energía. Junta de Andalucía.",tags:"mapea,plugin",icon:"./facade/assets/icons/icons.svg",centralized:!0}}},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(2);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,i(e).apply(this,arguments))}var n,o,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,M.impl.Control),n=e,(o=[{key:"addTo",value:function(t,n){l(i(e.prototype),"addTo",this).call(this,t,n)}}])&&a(n.prototype,o),u&&a(n,u),e}(),p=n(0),s=n.n(p);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(u)&&M.exception("La implementación usada no puede crear controles spatialcalculatorControl");var o=new u;return(n=m(this,y(e).call(this,o,"spatialcalculator"))).pluginOnLeft=t.pluginOnLeft,n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,M.Control),n=e,(o=[{key:"createView",value:function(t){var e=this;return this.map_=t,new Promise(function(t,n){e.pluginOnLeft&&document.querySelector(".m-panel.m-spatialcalculator").querySelector(".g-cartografia-localizacion").addEventListener("click",function(t){var n=document.querySelector(".m-panel.m-spatialcalculator.opened");null!==n&&(n=n.querySelector(".m-panel-btn.g-cartografia-flecha-izquierda")),n&&e.pluginOnLeft&&n.classList.add("opened-left")});var o=M.template.compileSync(s.a);e.template_=o,e.btnCalculate=o.querySelector("button#m-spatialcalculator-calculate"),e.selectSRS=o.querySelector("select#m-spatialcalculator-srs"),e.btnClean=o.querySelector("button#m-spatialcalculator-clean"),e.btnCalculate.addEventListener("click",function(t){return e.calculate_(t)}),e.selectSRS.addEventListener("change",function(t){return e.manageInputs_(t)}),e.btnClean.addEventListener("click",function(t){return e.cleanInputs_(t)}),t(e.template_)})}},{key:"copyText_",value:function(t){document.body.insertAdjacentHTML("beforeend",'<div id="copy" contenteditable>'.concat(t,"</div>")),document.getElementById("copy").focus(),document.execCommand("selectAll"),document.execCommand("copy"),document.getElementById("copy").remove()}},{key:"cleanInputs_",value:function(t){document.querySelector("div#m-spatialcalculator-result").innerHTML="",document.querySelector("#UTM-X").value="",document.querySelector("#UTM-Y").value="",document.querySelector("#LON").value="",document.querySelector("#LAT").value=""}},{key:"manageInputs_",value:function(t){var e=t.target,n=e.options[e.selectedIndex].value;n.indexOf("4326")>=0||n.indexOf("4258")>=0||n.indexOf("4230")>=0?(document.querySelector("div#m-spatialcalculator-utm").style.display="none",document.querySelector("div#m-spatialcalculator-latlon").style.display="block"):(document.querySelector("div#m-spatialcalculator-latlon").style.display="none",document.querySelector("div#m-spatialcalculator-utm").style.display="block")}},{key:"calculate_",value:function(t){var e=this;try{var n=document.querySelector("select#m-spatialcalculator-srs"),o=n.options[n.selectedIndex].value,a=document.querySelector("select#m-spatialcalculator-srs-target"),r=a.options[a.selectedIndex].value,l=-1,i=-1,c="",u="";o.indexOf("4326")>=0||o.indexOf("4258")>=0||o.indexOf("4230")>=0?(c=document.querySelector("div#m-spatialcalculator-latlon input#LON").value,u=document.querySelector("div#m-spatialcalculator-latlon input#LAT").value,l=parseFloat(c),i=parseFloat(u)):(c=document.querySelector("div#m-spatialcalculator-utm input#UTM-X").value,u=document.querySelector("div#m-spatialcalculator-utm input#UTM-Y").value,l=parseFloat(c),i=parseFloat(u));var p=ol.proj.get(o),s=ol.proj.get(r),d=Math.round(100*l)/100,f=Math.round(100*i)/100,m=ol.proj.transform([d,f],p,s),y=document.querySelector("div#m-spatialcalculator-result");if(Number.isNaN(m[0])||Number.isNaN(m[1]))y.innerHTML="Introduzca valores por favor";else{var v,S;r.indexOf("4326")>=0||r.indexOf("4258")>=0||r.indexOf("4230")>=0?(v=m[0].toFixed(9),S=m[1].toFixed(9),document.getElementById("resultado").innerHTML="Resultado (LON,LAT)"):(v=m[0].toFixed(2),S=m[1].toFixed(2),document.getElementById("resultado").innerHTML="Resultado (X,Y)"),y.innerHTML="".concat(v," , ").concat(S);var b=document.createElement("button");b.id="m-spatialcalculator-copy",b.title="Copiar en el portapapeles";var E=document.createElement("i");E.classList.add("g-cartografia-texto"),E.innerHTML=" Copiar",b.addEventListener("click",function(t){return e.copyText_(m)}),b.appendChild(E),y.appendChild(b)}}catch(t){M.dialog.error("Error realizando la transformación","Error"),document.querySelector("div#m-spatialcalculator-result").innerHTML=""}}},{key:"equals",value:function(t){var n=!1;return t instanceof e&&(n=this.name===t.name),n}}])&&f(n.prototype,o),a&&f(n,a),e}(),b=n(1);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=g(this,P(e).call(this))).map_=null,t.control_=null,t.position_=n.position||"TR",t.className_="m-spatialcalculator",t.collapsible_=!0,t.tooltip_="Calculadora espacial",t.metadata_=b.metadata,t}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,M.Plugin),n=e,(o=[{key:"addTo",value:function(t){var e=this,n={pluginOnLeft:!!["TL","BL"].includes(this.position_)};this.map_=t,this.control_=new S(n),this.panel_=new M.ui.Panel("SpatialCalculatorPanel",{collapsible:this.collapsible_,className:this.className_,collapsedButtonClass:"g-cartografia-localizacion",position:M.ui.position[this.position_],tooltip:this.tooltip_}),this.panel_.addControls(this.control_),this.map_.addPanels(this.panel_),this.control_.on(M.evt.ADDED_TO_MAP,function(){e.fire(M.evt.ADDED_TO_MAP)})}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]);var t=[null,null,null];this.map_=t[0],this.control_=t[1],this.panel_=t[2]}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"name",get:function(){return"spatialcalculator"}},{key:"control",get:function(){return this.control_}}])&&h(n.prototype,o),a&&h(n,a),e}();window.M.plugin||(window.M.plugin={}),window.M.impl||(window.M.impl={}),window.M.impl.plugin||(window.M.impl.plugin={}),window.M.plugin.SpatialCalculator=_,window.M.plugin.SpatialCalculatorControl=S,window.M.impl.plugin.SpatialCalculatorControl=u}]);
//# sourceMappingURL=spatialcalculator.ol.min.js.map